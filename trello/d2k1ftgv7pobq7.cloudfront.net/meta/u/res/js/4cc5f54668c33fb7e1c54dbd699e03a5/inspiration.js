$((function(){$body=$("body"),$carousel=$("div#carousel"),$category_nav=$("div#categories nav"),$category_select=$("div#categories select"),$filters=$("#filters"),$filters_category=$filters.find("a.category"),$filters_search=$filters.find("a.search"),$filters_search_span=$filters_search.find("span"),$grid_height=$("div#grid-height"),$grid=$("div#grid"),$meta_description=$('meta[name="description"]'),$search=$("input#search"),$showing=$("#showing strong.showing"),$total=$("#showing strong.total"),$bar=$("#bar"),$show_more=$("#showing a.show-more"),$back_to_top=$("#showing a.back-to-top");var a={category:null,search:"",batchSize:12,base:"/inspiration",lineClamping:null,stagger:.05,avatarFallback:"https://d2k1ftgv7pobq7.cloudfront.net/meta/u/res/images/49954069fe490655452c41ef5ebaec7b/inspiration-default-avatar.png",featuredText:$category_nav.find('a[data-category="featured"]').text()},e="",t="";$.each(window.inspiringCategories,(function(a,i){e+='<a data-category="'+a+'">'+i.title+"</a>",t+='<option value="'+a+'">'+i.title+"</option>"})),$category_nav.append(e),$category_select.append(t),function(a){for(var e=a.length-1;e>0;e--){var t=Math.floor(Math.random()*(e+1)),i=a[e];a[e]=a[t],a[t]=i}}(window.inspiringBoards);var i="";$.each(window.inspiringBoards,(function(e,t){t.tags.indexOf("featured")>-1&&(i+='<a class="carousel-item" href="'+t.boardUrl+'" target="_blank"><div class="carousel-item-col carousel-item-image" style="background-image: url(\''+t.backgroundImage+'\');"></div><div class="carousel-item-col carousel-item-text"><div class="content"><h2>'+t.boardName+"</h2><p>"+t.text+'</p></div><div class="author"><img src="'+(t.avatarUrl?t.avatarUrl:a.avatarFallback)+'"><div class="name">'+t.person+"</div>"+(t.personTitle?'<div class="title">'+t.personTitle+"</div>":"")+"</div></div></a>")})),$carousel.append(i);var s,r,o="";function n(){var e=0,t=0,i=new RegExp(a.search,"gi");$("#grid > a").each((function(){var s=!0,r=!0;(a.category||a.search)&&(a.category&&!$(this).hasClass(a.category)&&(s=!1),a.search&&!$(this).text().match(i)&&(s=!1)),s?(t++,e>=a.showing&&(r=!1)):r=!1,r?($(this).addClass("showing"),e++):$(this).removeClass("showing").find(".inner.visible").removeClass("visible")})),$body.toggleClass("no-results",0==e),$body.toggleClass("showing-all",e==t),$grid_height.css("minHeight",$grid.height()),a.category.length||a.search.length||$carousel.flickity("resize"),$bar.css({width:e/t*100+"%"}),$showing.text(e),$total.text(t),setTimeout(d,a.stagger)}function c(e){var t=window.inspiringCategories;if(t.featured={title:a.featuredText,meta:""},void 0!==e&&e in t||(e=""),e!=a.category){a.showing=a.batchSize,a.category=e,$category_select.val(e),$category_nav.find("a.selected").removeClass("selected"),e?$category_nav.find('a[data-category="'+e+'"]').addClass("selected"):($category_nav.find("a.selected[data-category]").removeClass("selected"),$category_nav.find("a").first().addClass("selected"));var i=e?window.titlePrefix+window.inspiringCategories[e].title:"Trello | Inspiration";document.title=i,history.pushState&&window.history.pushState({category:e},i,a.base+(e?"/"+e:"")),e&&($meta_description.attr("content",window.inspiringCategories[e].meta),$filters_category.text(window.inspiringCategories[e].title)),$body.toggleClass("category",e.length>0)}}function l(e){void 0===e&&(e="",$search.val("")),a.search=e,$filters_search_span.text(e),$body.toggleClass("searching",e.length>0)}function d(){$("#grid > a.showing .inner:not(.visible)").first().addClass("visible"),$("#grid > a.showing .inner:not(.visible)").size()&&setTimeout(d,a.stagger)}$.each(window.inspiringBoards,(function(e,t){o+='<a class="grid-item '+t.tags.join(" ")+'" href="'+t.boardUrl+'" target="_blank"><div class="inner"><div class="grid-image" style="background-image: url(\''+t.backgroundImage+"');\"><button>"+window.viewBoard+'</button></div><div class="grid-text"><h2>'+t.boardName+"</h2><p>"+t.text+'</p><div class="author"><img src="'+(t.avatarUrl?t.avatarUrl:a.avatarFallback)+'"><div class="name">'+t.person+"</div>"+(t.personTitle?'<div class="title">'+t.personTitle+"</div>":"")+"</div></div></div></a>"})),$grid.append(o),c(window.location.pathname.substr(a.base.length+1)),$carousel.flickity({prevNextButtons:!1,autoPlay:5e3,wrapAround:!0}),a.lineClamping&&$grid.find("p").each((function(){$clamp($(this).get(0),{clamp:a.lineClamping})})),n(),$body.addClass("loaded"),$back_to_top.click((function(){$("html, body").animate({scrollTop:0},500)})),$category_nav.on("click","a",(function(){c($(this).attr("data-category")),n()})),$category_select.change((function(){c($(this).val()),n()})),$filters_category.click((function(){c(),n()})),$("main").on("click","a.clear",(function(){c(),l(),n()})),$filters_search.click((function(){l(),n()})),$search.keyup((s=function(){var e=$search.val();e!=a.search&&(l(e),n())},function(){r&&clearTimeout(r),r=setTimeout((function(){s(),r=null}),500)})),$show_more.click((function(){a.showing+=a.batchSize,n()}))}));